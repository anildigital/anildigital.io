/** @jsx React.DOM */

var req = new XMLHttpRequest();
var App = React.createClass({

    getInitialState: function() { 
        return {recenttracks: {track: "Anil"}};
    },
    
    render: function() { 
        // var rows = [];
        // console.log(this.state.recenttracks.track);
        // for (var i=0; i < this.state.recenttracks.track.length; i++) {
        //     rows.push(<li>Hi</li>);
        // }
        console.log("RENDER CALLED");
        return <div>{this.state}</div>;
    },

    updateState: function() {
        console.log("Came here");
        var resp = JSON.parse(req.response);
        console.log("Resp", resp);
        this.setState = {recenttracks: {track: "Santosh"}};
    },

    fetchFeed: function() {
        console.log("Called");
        this.setState =  {recenttracks: {track: "Santosh"}};
        // var url = "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=anildigital&api_key=d5eb0b1875c450d79bb1e5bb36aac9a6&format=json";
        // req.onload = this.updateState;
        // req.open("GET", url);
        // req.send();
    },

    componentDidMount: function(){
        setInterval(this.fetchFeed, 1000);
    }   
    
});


React.render(<App name='dasdsad'/>, document.body);
